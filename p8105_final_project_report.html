<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Naina Ahuja, Mary Knoop, Sam Loewen, Uma Palaniappan, Britney Mazzetta" />

<meta name="date" content="2019-12-05" />

<title>Project Report: Data Sci Doggos</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="p8105_final_project_report.html">Final Project Report</a>
</li>
<li>
  <a href="https://rescuedogsrocknyc.org/">Adopt a Dog in NYC</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Report: Data Sci Doggos</h1>
<h4 class="author">Naina Ahuja, Mary Knoop, Sam Loewen, Uma Palaniappan, Britney Mazzetta</h4>
<h4 class="date">December 5, 2019</h4>

</div>


<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(viridis)
library(leaflet)</code></pre>
<p><span class="math inline">\(~\)</span></p>
<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>The motivation of this project was to compare dog based data across the various boroughs of NYC to deepen our understanding of the current patterns and trends among canines in NYC. We were able to do this by using the NYC DOMHM Dog Licensing Dataset from 2017 - 2019 to accomplish this goal.</p>
<p><span class="math inline">\(~\)</span></p>
<div id="goals-of-our-project" class="section level2">
<h2>Goals of our project</h2>
<ul>
<li>Understanding and visualizing dog distribution by borough in NYC</li>
<li>Identifying trends of licenses by year and/or month in NYC</li>
<li>Predicting dogs age based on borough and gender of dog</li>
</ul>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="related-work" class="section level1">
<h1>Related Work</h1>
<p>We were inspired to work on this project given our collective love for dogs. We were further intrigued to understand the current distribution and trends of dogs within NYC. Drawing inspiration from the NYC Air BnB dataset modeled in class, we realized we could perform similar analysis with this database to better understand what the current licensed dog landscape looks like. We thought that this website would be a knowledge base for any individual who would like to learn more about the current landscape of dogs in NYC.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial Questions</h1>
<p>We sought to understand the current landscape of licensed dogs in New York City. Additionally, we were also interested in comparing these demographic factors among the five boroughs. Furthermore, we wanted to deepen our understanding on the current patterns of licensing between 2017 - 2019 and examine if there were variations by year or month of license. Finally, we sought to find ways of predicting a dog’s age based on the borough and the gender of the dog. Based on this information, our questions are:</p>
<ul>
<li>What are the risk factors for heart disease and stroke? How can we visualize the correlation of individual risk factors with heart disease and stroke?</li>
<li>What is the distribution of these risk factors and outcomes in New York city?</li>
<li>How can we predict and visualize an individual’s risk for heart disease?</li>
</ul>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p>We utilized the NYC Dog Licensing dataset. All dog owners who reside in NYC are required by law to license their dogs. This is a publicly available dataset sourced from the Department of Health and Mental Hygiene (DOHMH) Dog Licensing System where owners are able to apply for and renew dog licenses. This dataset was created on September 19, 2017 and was last updated on July 25, 2019. There are 10 variables in this dataset with a raw number of 345,727 observations. The variables provided in the raw dataset are as follows:</p>
<ul>
<li>RowNumber: Row Number</li>
<li>AnimalName: User-provided dog name (unless specified otherwise)</li>
<li>AnimalGender: M(Male) or F(Female) dog gender</li>
<li>AnimalBirthMonth: Month and year dog was born</li>
<li>BreedName: Dog Breed</li>
<li>Borough: Owner Borough</li>
<li>ZipCode: Owner Zip Code</li>
<li>LiscenceIssuedDate: Date the dog license was issued</li>
<li>LiscenceExpiredDate: Date the dog license expires</li>
<li>Extract Year: Year Data was extracted</li>
</ul>
<p><span class="math inline">\(~\)</span></p>
<div id="loading-and-cleaning-data" class="section level3">
<h3>Loading and Cleaning Data</h3>
<p>The dataset was cleaned and adjusted for this analysis. All dogs whose breed were listed as “unknown” were removed, as well as any dogs who were listed as over 20 years old at the time of their license. Originally there were no boroughs listed in this dataset, so we used the available zip codes to assign boroughs to each record. Records whose zip code did not correlate to a borough were dropped. A variable <code>license_length</code> was added to calculate the length in years of each license. There were slight differences in the way breed names were recorded, these were adjusted to be uniform.</p>
<p>Variables were changed to appropriate data type where necessary.</p>
<p>The main database included the same dog multiple times if she had more than one license. We created a subset to catalog only the distinct dogs present in our dataset. To identify individual dogs we matched records on animal name, gender, birth year, and breed name. We also added latitude and longitude data that corresponds to zip code for mapping purposes.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p><span class="math inline">\(~\)</span></p>
<div id="loading-and-tidying-the-data" class="section level3">
<h3>Loading and tidying the data</h3>
<p><span class="math inline">\(~\)</span></p>
<pre class="r"><code>lat_lon = read.csv(&quot;./data/lat-long.csv&quot;)

dogz = read.csv(&quot;./data/NYC_Dog_Licensing_Dataset.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(breed_name != &quot;Unknown&quot;,
         extract_year-animal_birth_month &lt; 20) %&gt;% 
  mutate(animal_name = str_to_sentence(animal_name),
         borough = ifelse(zip_code %in% c(10001:10282),&quot;Manhattan&quot;, borough),
         borough = ifelse(zip_code %in% c(10301:10314), &quot;Staten Island&quot;, borough),
         borough = ifelse(zip_code %in% c(10451:10475), &quot;Bronx&quot;, borough),
         borough = ifelse(zip_code %in% c(11004,11101:11106,11109,11351,11354:11375,11377:11379,11385,11411:11423,11426:11430,11432:11436,11691:11694,11697), &quot;Queens&quot;, borough),
         borough = ifelse(zip_code %in% c(11201,11203:11226,11228:11239,11241:11243,11249,11252,11256), &quot;Brooklyn&quot;, borough),
         borough = as.factor(borough),
         breed_name = as.character(breed_name),
         license_issued_date = as.Date(license_issued_date, format = &quot;%m/%d/%Y&quot;),
         license_expired_date = as.Date(license_expired_date, format = &quot;%m/%d/%Y&quot;),
         license_length = year(license_expired_date) - year(license_issued_date),
         dog_age = 2019 - animal_birth_month,
         breed_name = ifelse(breed_name == &quot;American Pit Bull Terrier/Pit Bull&quot;, &quot;American Pit Bull Mix / Pit Bull Mix&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;American Pit Bull Terrier/Pit Bull&quot;, &quot;American Pit Bull Mix / Pit Bull Mix&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Australian Cattle Dog&quot;, &quot;Australian Cattledog&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Bassett Hound&quot;, &quot;Basset Hound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Brittany&quot;, &quot;Brittany Spaniel&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Coonhound, Black and Tan&quot;, &quot;Black and Tan Coonhound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Coonhound, Black and Tan&quot;, &quot;Black and Tan Coonhound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Coonhound, Blue Tick&quot;, &quot;Bluetick Coonhound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Coonhound, Treeing Walker&quot;, &quot;Treeing Walker Coonhound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Cotton de Tulear&quot;, &quot;Coton de Tulear&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Japanese Chin/Spaniel&quot;, &quot;Japanese Chin&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Jindo Dog, Korea&quot;, &quot;Jindo&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Mastiff, French (Dogue de Bordeaux)&quot;, &quot;Dogue de Bordeaux&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Pharoh hound&quot;, &quot;Pharaoh Hound&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Schipperke&quot;, &quot;Schipperkee&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Schnauzer, Miniature&quot;, &quot;Miniature Schnauzer&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Schnauzer, Miniature Crossbreed&quot;, &quot;Miniature Schnauzer, Crossbreed&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Welsh Corgi, Cardigan&quot;, &quot;Cardigan Welsh Corgi&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Welsh Corgi, Pembroke&quot;, &quot;Pembroke Welsh Corgi&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Bull Dog, French&quot;, &quot;French Bulldog&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Collie, Bearded&quot;, &quot;Bearded Collie&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Bullmastiff&quot;, &quot;Mastiff, Bull&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Neapolitan Mastiff&quot;, &quot;Mastiff, Neapolitan&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Tibetan Mastiff&quot;, &quot;Mastiff, Tibetan&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Pointer, German Shorthaired&quot;, &quot;German Shorthaired Pointer&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Pointer, German Wirehaired&quot;, &quot;German Wirehaired Pointer&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Schnauzer, Giant&quot;, &quot;Giant Schnauzer&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Schnauzer, Standard&quot;, &quot;Standard Schnauzer&quot;, breed_name),
         breed_name = ifelse(breed_name == &quot;Chinese Shar-Pei&quot;, &quot;Shar-Pei, Chinese&quot;, breed_name)) %&gt;% 
  drop_na(borough) %&gt;% 
  rename(animal_birth_year = animal_birth_month, license_id = row_number) %&gt;% 
  select(-extract_year)</code></pre>
<pre class="r"><code>dogz_1 =
  dogz %&gt;% 
  distinct(animal_name, animal_gender, animal_birth_year, breed_name, .keep_all = TRUE) %&gt;% 
  select (-license_issued_date, -license_expired_date, -license_length)

distinct_dogz =
  left_join(dogz_1, lat_lon, by = &quot;zip_code&quot;) %&gt;% 
  select(-City,-State,-Timezone,-Daylight.savings.time.flag,-geopoint) %&gt;% 
  janitor::clean_names()</code></pre>
</div>
<div id="gender-of-dogs-by-borough" class="section level3">
<h3>Gender of dogs by borough</h3>
<pre class="r"><code>plot_2=
  distinct_dogz %&gt;% 
  filter(animal_gender == &quot;M&quot; | animal_gender == &quot;F&quot;) %&gt;% 
  ggplot(aes(x = borough, fill = animal_gender)) +
  geom_histogram(position = &quot;dodge&quot;, stat = &quot;count&quot;) +
  labs(
    title = &quot;Gender of dogs by borough&quot;,
    x = &quot;New York Borough&quot;,
    y = &quot;Number of dogs&quot;
  )

plot_2</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Based on this bar graph plotting borough by frequency of dogs, we can see that overall, Manhattan has the most dogs (over 20,000 dogs for each gender) followed by Brooklyn, Queens, The Bronx, and Staten Island (with about 5,000 dogs for each gender). Additionally, among all boroughs there are more male dogs than there are female dogs.</p>
</div>
<div id="age-distribution-of-dogs-by-boroughs" class="section level3">
<h3>Age Distribution of Dogs by Boroughs</h3>
<pre class="r"><code>plot_3=
  distinct_dogz %&gt;% 
  filter(dog_age &lt; 20) %&gt;% 
  ggplot(aes(x = borough, y = dog_age)) +
  geom_boxplot (color = &quot;purple&quot;) +
  labs(
    title = &quot;Age distribution of dogs by borough&quot;,
    x = &quot;New York Borough&quot;,
    y = &quot;Dog&#39;s Age&quot;
  )
plot_3</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Based on this box and whisker plot, plotting borough dog’s age in years, we can see that overall, the median age for dogs is about 6 years. The Bronx, Brooklyen, and Queens have similar distributions which are right skewed while Manhattan has a smaller range of values. Staten Island has the oldest dogs ranging above 10 years with no outliers shown.</p>
</div>
<div id="top-breed-of-dogs-by-borough" class="section level3">
<h3>Top Breed of dogs by Borough</h3>
<pre class="r"><code>distinct_dogz %&gt;% 
  group_by(borough) %&gt;% 
  count(breed_name) %&gt;% 
  top_n(5)</code></pre>
<pre><code>## # A tibble: 25 x 3
## # Groups:   borough [5]
##    borough  breed_name                               n
##    &lt;fct&gt;    &lt;chr&gt;                                &lt;int&gt;
##  1 Bronx    American Pit Bull Mix / Pit Bull Mix  1344
##  2 Bronx    Chihuahua                              865
##  3 Bronx    Maltese                                529
##  4 Bronx    Shih Tzu                              1035
##  5 Bronx    Yorkshire Terrier                     1252
##  6 Brooklyn American Pit Bull Mix / Pit Bull Mix  2012
##  7 Brooklyn Chihuahua                             1551
##  8 Brooklyn Labrador Retriever Crossbreed         1083
##  9 Brooklyn Shih Tzu                              1853
## 10 Brooklyn Yorkshire Terrier                     1978
## # … with 15 more rows</code></pre>
<pre class="r"><code>plot_4=
distinct_dogz %&gt;% 
  group_by(borough) %&gt;% 
  count(breed_name) %&gt;% 
  top_n(5) %&gt;% 
  ggplot(aes(x = breed_name, y = n)) +
  geom_point() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  facet_grid(~borough, scales = &quot;free&quot;, space = &quot;free&quot;) +
  labs(
    title = &quot;Top 5 breeds of dogs by borough&quot;,
    x = &quot;Dog Breed&quot;,
    y = &quot;Total Count&quot;
  )
plot_4</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Based on this plot, plotting dog breed by the total count, the most common dog breeds are American Pit Bull Mix/Pit Bull Mix, Chihuahua, Labrador Retriever, Labrador Retriever Crossbreed, Maltese, Shih Tzu, and Yorkshire Terrier. American Pit Bull Mix/Pit Bull Mix has the highest observed frequency in Brooklyn (n =2000) while the lowest in Staten Island (n = 600). Additionally, in Manhattan, Chihuahua’s, and Yorkshire Terriers have the highest observed frequency.</p>
</div>
<div id="number-of-licenses-over-time-license-issue-date-vs.number-of-licenses" class="section level3">
<h3>Number of licenses over time (license issue date vs. number of licenses)</h3>
<pre class="r"><code>plot_5.5=
  dogz %&gt;% 
  mutate(license_issued_date = floor_date(as_date(license_issued_date), &quot;month&quot;)) %&gt;% 
  group_by(license_issued_date) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
      ggplot(aes(x = license_issued_date, y = n_obs, color = n_obs)) + 
      geom_point() + geom_line() +
      labs(title = &quot;Number of licenses over time&quot;, 
      x = &quot;License issue date&quot;, 
      y = &quot;Number of licenses&quot;)
plot_5.5</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="number-of-licenses-issued-per-month-liscence-issue-date-vs.number-of-liscences" class="section level3">
<h3>Number of licenses issued per month (liscence issue date vs. number of liscences)</h3>
<pre class="r"><code>plot_5.51=
  dogz %&gt;% 
  mutate(license_issued_date = month(license_issued_date),
         license_issued_date = month.abb[license_issued_date],
         license_issued_date = factor(license_issued_date, c(&quot;Jan&quot;,&quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;,&quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;,&quot;Nov&quot;, &quot;Dec&quot;), ordered = TRUE)) %&gt;%
  group_by(license_issued_date) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
      ggplot(aes(x = license_issued_date, y = n_obs)) + 
      geom_point() + geom_line(group=1) +
      labs(title = &quot;Number of licenses issued per month&quot;, 
      x = &quot;License issue date&quot;, 
      y = &quot;Number of licenses&quot;)
plot_5.51</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="most-popular-dog-name-by-birth-year" class="section level3">
<h3>Most popular dog name by birth year</h3>
<pre class="r"><code>top_dogz =
distinct_dogz %&gt;% 
  filter(animal_name != &quot;Unknown&quot;,
         animal_name != &quot;Name not provided&quot;) %&gt;% 
  group_by(animal_name) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
  arrange(desc(n_obs)) %&gt;% 
  top_n(10)

knitr::kable(top_dogz)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">animal_name</th>
<th align="right">n_obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Max</td>
<td align="right">720</td>
</tr>
<tr class="even">
<td align="left">Charlie</td>
<td align="right">696</td>
</tr>
<tr class="odd">
<td align="left">Bella</td>
<td align="right">667</td>
</tr>
<tr class="even">
<td align="left">Coco</td>
<td align="right">633</td>
</tr>
<tr class="odd">
<td align="left">Lucy</td>
<td align="right">568</td>
</tr>
<tr class="even">
<td align="left">Lola</td>
<td align="right">539</td>
</tr>
<tr class="odd">
<td align="left">Rocky</td>
<td align="right">535</td>
</tr>
<tr class="even">
<td align="left">Bailey</td>
<td align="right">529</td>
</tr>
<tr class="odd">
<td align="left">Buddy</td>
<td align="right">503</td>
</tr>
<tr class="even">
<td align="left">Lucky</td>
<td align="right">497</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plot_6 = 
distinct_dogz %&gt;% 
  filter(animal_name != &quot;Unknown&quot;,
         animal_name != &quot;Name not provided&quot;,
         animal_name != &quot;Name&quot;,
         animal_birth_year != 1997) %&gt;% 
  group_by(animal_birth_year, animal_name) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
  top_n(1) %&gt;% 
    ggplot(aes(x=animal_birth_year, y=n_obs, group = animal_name, color = animal_name)) + geom_point() + geom_line() +
  labs(title = &quot;Top name by birth year&quot;, 
    x = &quot;Birth year&quot;, 
    y = &quot;Number of dogs&quot;)
plot_6</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="map" class="section level3">
<h3>Map</h3>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="findings" class="section level1">
<h1>Findings</h1>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="additional-analysis" class="section level1">
<h1>Additional Analysis</h1>
<pre class="r"><code>#create reference groups that are coded as 
distinct_dogz_reg = 
  distinct_dogz %&gt;% 
  mutate(
    borough = fct_infreq(borough),
    animal_gender = fct_infreq(animal_gender),
    breed_name = fct_infreq(breed_name)
    )
#run linear regression with dog age as Y and borough, breed name and animal gender as categorical
fit = lm(dog_age ~ borough + animal_gender, data = distinct_dogz)

#view outputs
fit %&gt;% 
  broom::tidy()</code></pre>
<pre><code>## # A tibble: 7 x 5
##   term                 estimate std.error statistic   p.value
##   &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)           16.5       2.00        8.27 1.30e- 16
## 2 boroughBrooklyn        0.0510    0.0457      1.11 2.65e-  1
## 3 boroughManhattan       0.520     0.0439     11.8  2.82e- 32
## 4 boroughQueens          0.473     0.0479      9.88 5.42e- 23
## 5 boroughStaten Island   1.25      0.0588     21.2  9.03e-100
## 6 animal_genderF        -9.72      2.00       -4.86 1.16e-  6
## 7 animal_genderM        -9.89      2.00       -4.95 7.47e-  7</code></pre>
<pre class="r"><code>#create tidy table
fit %&gt;% 
  broom::tidy() %&gt;% 
  select(term, estimate, p.value) %&gt;% 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">16.541</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">0.051</td>
<td align="right">0.265</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">0.520</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">0.473</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">1.247</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">animal_genderF</td>
<td align="right">-9.717</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">animal_genderM</td>
<td align="right">-9.892</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>In our linear model we predict our outcome of dog’s age given our main exposure of borough, adjusting for dog’s gender. Our beta values show that there is not much variance among dog age across different boroughs for both male and female dogs. Additionally, as seen in our residuals plot, our data does not likely contain outliers and appears to be normally distributed. One limitation to our model is the exclusion of breeds type as a variable in our model. There is a theory that small dogs tend to live longers lives, thus in an ideal model we would have controlled for dog breed by categorizing breed size as small, medium, large breed. Unfortunately, the large number of breed types included in our dataset impeded our ability to categorizing each breed, and without categorizing this variable our degrees of freedom would be far too high for our model to be parsimonious. For these reasons we chose to exclude this variable from our model.</p>
<pre class="r"><code>#graph residuals for each borough
distinct_dogz_reg %&gt;% 
  modelr::add_residuals(fit) %&gt;% 
  ggplot(aes(x = borough, y = resid)) + geom_violin(fill = &quot;pink&quot;)</code></pre>
<p><img src="p8105_final_project_report_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
